# --- Connection and Authentication ---
listen_addresses = '*'        # Allow connections from other containers
max_connections = 200

# --- Memory Configuration ---
effective_cache_size = 32GB
shared_buffers = 8GB
work_mem = 64MB
maintenance_work_mem = 2GB

# --- Optimizer Settings ---
enable_bitmapscan = on
enable_tidscan = on

# Ensure GEQO (Genetic Query Optimizer) is enabled
geqo = on
# GEQO is used for queries with >= geqo_threshold joins
# We set it low (e.g., 10) to ensure it's used for complex queries.
geqo_threshold = 10

# --- Parallelism Settings ---
max_parallel_workers_per_gather = 4
max_parallel_workers = 8
max_worker_processes = 8

# --- Checkpointing & Logging ---
max_wal_size = 2GB
min_wal_size = 1GB
log_min_duration_statement = 250ms  # Log slow queries